<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 게시판 처리 SQL -->
<mapper namespace="com.scit.mybatis.DAO.BoardMapper">

	<insert id="insertBoard" parameterType="Board">
		INSERT INTO BOARDINFO
		( BOARDSEQ, ID, BOARDTITLE, BOARDCONTENT, HITCOUNT, INDATE )
		VALUES
		( boardseq.nextval, #{id}, #{boardtitle}, #{boardcontent}, 0, SYSDATE )
		
	</insert>

	<select id="selectBoardlist" resultType="Board">
	SELECT
		BOARDSEQ,
		ID,
		BOARDTITLE,
		BOARDCONTENT,
		HITCOUNT,
		INDATE
	FROM
		BOARDINFO
	ORDER BY 
		INDATE
			DESC
	</select>
	
	<update id="increaseHit" parameterType="String">
	
	UPDATE BOARDINFO
	SET ( HITCOUNT=HICOUNT+1 ) WHERE BOARDSEQ=#{boardSeq}
			
	</update>
	
	<delete id="deleteBoard" parameterType="String">
	
	DELETE BOARDINFO WHERE BOARDSEQ=#{boardSeq}
			
	</delete>
	
	<update id="updateContent" parameterType="Board">
	
	UPDATE BOARDINFO
	SET	BOARDTITLE=#{boardtitle} BOARDCONTENT=#{boardcontent} WHERE	BOARDSEQ=#{boardseq}
	
	</update>

	<insert id="insertComment" parameterType="Comment">
	INSERT INTO COMMENTS
	(
	COMMENTSSEQ,
	BOARDSEQ,
	ID,
	COMMENTS,
	INDATE
	)
	VALUES
	(
	commentseq.nextval,
	#{boardSeq},
	#{id},
	#{comments},
	sysdate
	)
	</insert>
	
	<select id="selectComments" parameterType="String" resultType="Comment">
	SELECT
		COMMENTSSEQ,
		BOARDSEQ,
		ID,
		COMMENTS,
		INDATE
	FROM
		COMMENTS
	WHERE
		BOARDSEQ=#{boardseq}
	ORDER BY
		INDATE DESC
	</select>
</mapper>
